# 課題1
- Check制約は使うべきでない
  - 将来的な仕様変更は想像し得る。(他のドメインも許容するなど)
  → その度に設定ルールが複雑化し、制約の貼り直しが必要になる。
  → 誤って他のドメインのメールアドレスが追加されても、システムへの影響が少ないことが考えられるのと、リカバリーも比較的簡単に行えるため。

- 個人的にTrigger機能は使うべきでない
  - アプリケーション側でDBにその制約があることを認識する必要がある。
    → 認知していないと、そのままアプリケーション側でも同様の機能を実装し、二重インサートが走るようになるなど。
  - こちらも先ほど同様、誤ってインサートされてもシステムへの影響が少ないことが考えられるのと、リカバリーも比較的簡単に行えるため。
  - 必ず使わないべきというわけではないスタンスである。

- 個人的にはEnum機能は使うべきでない
  - マスタ値として抽出できない。
    → 制約内容を確認しないと、どのデータが入るか把握できない。
    → 例えば、テーブルに「no response」が存在しない場合、マスタ値の取得が厳しい。
  - アプリケーション側がどのようなデータが保持されるべきか認識する必要がある。
    → 「men」、「women」などがはいる可能性もある。

- Domain機能は使うべきである
  - 旧郵便番号の入力を防ぐことができる。
  - 郵便番号形式以外の形式をインサートできなくできる。
  - 将来的な仕様変更が想像し得ない。
  - アプリケーションの実装と剥離しない。
    - アプリケーションでも`xxx-xxxx`でインサートするロジックや検証することが考えられる。

データベースで制約をかけるのは、データの整合性が不一致な場合の深刻度が大きい場合(ユーザの生活や生死に直結するなど)や、不一致な場合のリカバリー性が低い(元の正常な状態に戻せない、長時間のメンテが必要)などのケースの場合に取り入れる必要があると考える。

# 課題2
ECサイトでユーザー新規登録時に、U-xxx(xは番号)といったユーザーIDを付与するようにした。
そのユーザーIDの形式になるように制約を課したが、ユーザー増加によって番号が上限を超えるようになったため、アンチパターンに陥った。